{"version":3,"file":"drop-down.js","sourceRoot":"","sources":["../../../../src/components/drop-down/drop-down.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as keycode from 'keycode';\nimport * as React from 'react';\nimport {properties, stylable} from 'wix-react-tools';\nimport {ChangeEvent} from '../../types/events';\nimport {FormInputProps} from '../../types/forms';\nimport {noop} from '../../utils/noop';\nimport {Popup} from '../popup/';\nimport {OptionList, SelectionList} from '../selection-list';\nimport {CaretDown} from './drop-down-icons';\nimport style from './drop-down.st.css';\n\nconst KeyCodes: any = {\n    ENTER: keycode('enter'),\n    UP: keycode('up'),\n    DOWN: keycode('down'),\n    SPACE: keycode('space'),\n    ESC: keycode('escape')\n};\n\nexport interface DropDownProps extends OptionList, FormInputProps<string>, properties.Props {\n    open?: boolean;\n    disabled?: boolean;\n    openOnFocus?: boolean;\n    children?: React.ReactNode;\n    toggleIcon?: React.ComponentType;\n    tabIndex?: number;\n}\n\nexport interface DropDownState {\n    dropdown: HTMLDivElement | null;\n    open: boolean;\n}\n\n@stylable(style)\n@properties\nexport class DropDown extends React.PureComponent<DropDownProps, DropDownState> {\n    public static defaultProps: DropDownProps = {\n        open: false,\n        children: [],\n        onChange: noop,\n        tabIndex: 0,\n        toggleIcon: CaretDown,\n        disabled: false\n    };\n\n    public state: DropDownState = {\n        dropdown: null,\n        open: this.props.open!\n    };\n\n    public onItemClick = (e: ChangeEvent<string>) => {\n        this.closeDropdown();\n        this.props.onChange!({value: e.value});\n    }\n\n    public render() {\n        const ToggleIcon = this.props.toggleIcon!;\n\n        return (\n            <div\n                data-automation-id=\"DROP_DOWN\"\n                className=\"drop-down\"\n                onKeyDown={this.onKeyDown}\n                onFocus={this.onFocus}\n                tabIndex={this.props.tabIndex}\n                ref={dropdown => this.setState({dropdown})}\n            >\n                <div data-automation-id=\"DROP_DOWN_INPUT\" onClick={this.toggleDropdown} className=\"drop-down-input\">\n                    <span className=\"label\">{this.props.value!}</span>\n                    <div className=\"caret\" data-automation-id=\"ICON\">\n                        <ToggleIcon />\n                    </div>\n                </div>\n                <Popup open={this.state.open && !this.props.disabled} anchor={this.state.dropdown}>\n                    <div className=\"root\">\n                        <SelectionList\n                            data-automation-id=\"DROP_DOWN_LIST\"\n                            className=\"drop-down-list\"\n                            value={this.props.value}\n                            onChange={this.onItemClick!}\n                            dataSource={this.props.dataSource}\n                        >\n                            {this.props.children}\n                        </SelectionList>\n                    </div>\n                </Popup>\n            </div>\n        );\n    }\n\n    private onFocus = () => {\n        if (this.props.openOnFocus) {\n            this.openDropdown();\n        }\n    }\n\n    private toggleDropdown = () => {\n        if (!this.props.disabled) {\n            this.setState({open: !this.state.open});\n        }\n    }\n\n    private openDropdown() {\n        if (!this.props.disabled) {\n            this.setState({open: true});\n        }\n    }\n\n    private closeDropdown() {\n        if (!this.props.disabled) {\n            this.setState({open: false});\n        }\n    }\n\n    private onKeyDown: React.EventHandler<React.KeyboardEvent<HTMLDivElement>> = e => {\n        switch (e.keyCode) {\n            case KeyCodes.SPACE:\n                e.preventDefault();\n                this.toggleDropdown();\n                break;\n            case KeyCodes.ESC:\n                e.preventDefault();\n                this.state.open && this.closeDropdown();\n                break;\n            case KeyCodes.DOWN:\n                e.preventDefault();\n                !this.state.open && this.openDropdown();\n                break;\n        }\n    }\n}\n"]}