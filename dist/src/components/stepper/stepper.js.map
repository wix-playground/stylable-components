{"version":3,"file":"stepper.js","sourceRoot":"","sources":["../../../../src/components/stepper/stepper.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {stylable} from 'wix-react-tools';\nimport {ChevronDownIcon, ChevronUpIcon} from '../../icons';\nimport buttonStyles from '../../style/default-theme/controls/button.st.css';\nimport {GlobalEvent} from '../global-event';\nimport styles from './stepper.st.css';\n\nexport interface StepperProps extends React.HTMLProps<HTMLElement> {\n    disableUp?: boolean;\n    disableDown?: boolean;\n    dragStep?: number;\n    onUp(modifiers: Modifiers): void;\n    onDown(modifiers: Modifiers): void;\n}\n\nexport interface State {\n    dragged: boolean;\n}\n\nexport interface Modifiers {\n    altKey?: boolean;\n    ctrlKey?: boolean;\n    shiftKey?: boolean;\n}\n\ninterface DragPoint {\n    clientX: number;\n    clientY: number;\n}\n\nconst DEFAULTS = {\n    dragStep: 10,\n    disableUp: false,\n    disableDown: false\n};\n\n@stylable(styles)\nexport class Stepper extends React.Component<StepperProps, State> {\n    public static defaultProps = {\n        disableUp: DEFAULTS.disableUp,\n        disableDown: DEFAULTS.disableDown\n    };\n\n    public state: State = {dragged: false};\n\n    private dragRefPoint: DragPoint = {\n        clientX: 0,\n        clientY: 0\n    };\n\n    public render() {\n        const {dragged} = this.state;\n        const {\n            onUp,\n            onDown,\n            disableUp,\n            disableDown,\n            dragStep,\n            ...props\n        } = this.props;\n\n        return (\n            <div\n                {...props}\n                onMouseDown={this.handleDragStart}\n            >\n                <button\n                    type=\"button\"\n                    tabIndex={-1}\n                    data-automation-id=\"STEPPER_INCREMENT\"\n                    className={`${buttonStyles.root} control up`}\n                    onClick={this.handlerClickUp}\n                    disabled={disableUp}\n                >\n                    <ChevronUpIcon className=\"control-icon\" />\n                </button>\n                <button\n                    type=\"button\"\n                    tabIndex={-1}\n                    data-automation-id=\"STEPPER_DECREMENT\"\n                    className={`${buttonStyles.root} control down`}\n                    onClick={this.handlerClickDown}\n                    disabled={disableDown}\n                >\n                    <ChevronDownIcon className=\"control-icon\"/>\n                </button>\n                <GlobalEvent\n                    mousemove={dragged ? this.handleDrag : undefined}\n                    mouseup={this.handleDragStop}\n                />\n            </div>\n        );\n    }\n\n    private handlerClickUp: React.MouseEventHandler<HTMLButtonElement> =\n        ({altKey, ctrlKey, shiftKey}) => this.props.onUp({altKey, ctrlKey, shiftKey})\n\n    private handlerClickDown: React.MouseEventHandler<HTMLButtonElement> =\n        ({altKey, ctrlKey, shiftKey}) => this.props.onDown({altKey, ctrlKey, shiftKey})\n\n    private handleDragStart: React.MouseEventHandler<HTMLDivElement> =\n        ({clientX, clientY}) => {\n            this.setState({dragged: true});\n            this.updateDragRefPoint({clientX, clientY});\n        }\n\n    private handleDragStop = () => {\n            this.setState({dragged: false});\n            this.resetDragRefPoint();\n        }\n\n    private updateDragRefPoint({clientX, clientY}: DragPoint) {\n        this.dragRefPoint.clientX = clientX;\n        this.dragRefPoint.clientY = clientY;\n    }\n\n    private resetDragRefPoint() {\n        this.dragRefPoint.clientX = 0;\n        this.dragRefPoint.clientY = 0;\n    }\n\n    private handleDrag = ({clientX, clientY, shiftKey, altKey, ctrlKey}: MouseEvent) => {\n        const {dragged} = this.state;\n        const {onUp, onDown, disableUp, disableDown, dragStep = DEFAULTS.dragStep} = this.props;\n        const refPoint = this.dragRefPoint;\n\n        if (dragged) {\n            if (!disableUp && clientY <= refPoint.clientY - dragStep) {\n                this.updateDragRefPoint({clientX, clientY});\n                onUp({altKey, ctrlKey, shiftKey});\n            }\n\n            if (!disableDown && clientY >= refPoint.clientY + dragStep) {\n                this.updateDragRefPoint({clientX, clientY});\n                onDown({altKey, ctrlKey, shiftKey});\n            }\n        }\n    }\n}\n"]}