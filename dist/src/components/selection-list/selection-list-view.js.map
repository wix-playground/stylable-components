{"version":3,"file":"selection-list-view.js","sourceRoot":"","sources":["../../../../src/components/selection-list/selection-list-view.tsx"],"names":[],"mappings":"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","sourcesContent":["import {observer} from 'mobx-react';\nimport React = require('react');\nimport {properties, stylable} from 'wix-react-tools';\nimport {ChangeEvent} from '../../types/events';\nimport {FormInputProps} from '../../types/forms';\nimport {noop} from '../../utils';\nimport {SelectionListItem, SelectionListItemValue, SelectionListModel} from './selection-list-model';\nimport listStyle from './selection-list.st.css';\n\nfunction closestElementMatching(\n    predicate: (element: HTMLElement) => boolean,\n    startAt: HTMLElement\n): HTMLElement | null {\n    let current: HTMLElement | null = startAt;\n    while (current && !predicate(current)) {\n        current = current.parentElement;\n    }\n    return current;\n}\n\nexport interface ViewProps extends FormInputProps<SelectionListItemValue> {\n    className?: string;\n    focused?: boolean;\n    list: SelectionListModel;\n    onBlur?: React.FocusEventHandler<HTMLElement>;\n    onChange?: (event: ChangeEvent<SelectionListItemValue>) => void;\n    onFocus?: React.FocusEventHandler<HTMLElement>;\n    onKeyDown?: React.KeyboardEventHandler<HTMLElement>;\n    style?: React.CSSProperties;\n    tabIndex?: number;\n}\n\n@observer\n@stylable(listStyle)\n@properties\nexport class SelectionListView extends React.Component<ViewProps> {\n    public static defaultProps: Partial<ViewProps> = {\n        onChange: noop,\n        onBlur: noop,\n        onFocus: noop,\n        onKeyDown: noop\n    };\n\n    public render() {\n        return (\n            <div\n                className=\"list\"\n                data-automation-id=\"LIST\"\n                style-state={{focused: Boolean(this.props.focused)}}\n                onBlur={this.props.onBlur}\n                onClick={this.handleClick}\n                onFocus={this.props.onFocus}\n                onKeyDown={this.props.onKeyDown}\n                tabIndex={this.props.tabIndex}\n            >\n                {this.props.list.items.map((item, index) =>\n                    <ItemWrapper key={index} item={item} />\n                )}\n            </div>\n        );\n    }\n\n    private handleClick: React.MouseEventHandler<HTMLElement> = event => {\n        const item = closestElementMatching(\n            el => el.parentElement === event.currentTarget,\n            event.target as HTMLElement\n        );\n        if (!item) {\n            return;\n        }\n        const value = item.dataset.value;\n        if (value !== undefined && value !== this.props.list.getSelectedValue()) {\n            this.props.onChange!({value});\n        }\n    }\n}\n\n@observer\nclass ItemWrapper extends React.Component<{item: SelectionListItem}> {\n    public render() {\n        const item = this.props.item;\n        if (item.isOption) {\n            return React.cloneElement(item.element, {\n                focused:  item.focused,\n                selected: item.selected\n            });\n        }\n        return item.element;\n    }\n}\n"]}