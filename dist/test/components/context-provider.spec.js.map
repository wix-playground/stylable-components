{"version":3,"file":"context-provider.spec.js","sourceRoot":"","sources":["../../../test/components/context-provider.spec.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {findDOMNode} from 'react-dom';\nimport {ClientRenderer, expect} from 'test-drive-react';\nimport {ContextProvider} from '../../src';\n\ndescribe('<ContextProvider/>', () => {\n    const clientRenderer = new ClientRenderer();\n    afterEach(() => clientRenderer.cleanup());\n\n    describe('render with no properties', () => {\n        let root: any;\n        beforeEach(() => {\n            const renderer = clientRenderer.render(<ContextProvider/>);\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n        it('should render div', () => {\n            expect(root).instanceof(HTMLDivElement);\n        });\n    });\n\n    describe('render with tagName=\"p\" ', () => {\n        let root: any;\n        beforeEach(() => {\n            const renderer = clientRenderer.render(<ContextProvider tagName=\"p\"/>);\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n        it('should render paragraph', () => {\n            expect(root).instanceof(HTMLParagraphElement);\n        });\n    });\n\n    describe('render with children ', () => {\n        let renderer: any;\n        let root: any;\n        beforeEach(() => {\n            renderer = clientRenderer.render(\n                <ContextProvider>\n                    <div data-automation-id=\"TEST_DIV\">Hello</div>\n                </ContextProvider>\n            );\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n        it('should render child', () => {\n            expect(renderer.select('TEST_DIV')).to.not.null;\n        });\n    });\n\n    describe('render with \"style\" and \"className\" ', () => {\n        let renderer: any;\n        let root: any;\n        beforeEach(() => {\n            renderer = clientRenderer.render(\n                <ContextProvider\n                    className=\"context-div\"\n                    style={{width: 10}}\n                />\n            );\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n        it('should have \"className\"', () => {\n            expect(root).to.have.class('context-div');\n        });\n        it('should have inline styles', () => {\n            expect(root).attr('style', 'width: 10px;');\n        });\n    });\n\n    describe('render with dir=\"rtl\" ', () => {\n        class Inner extends React.Component {\n            public static contextTypes = {\n                contextProvider: PropTypes.shape({\n                    dir: PropTypes.string\n                })\n            };\n            public render() {\n                return <div data-automation-id=\"TEST_DIV\" dir={this.context.contextProvider.dir}/>;\n            }\n        }\n        let renderer: any;\n        let root: any;\n        beforeEach(() => {\n            renderer = clientRenderer.render(\n                <ContextProvider dir=\"rtl\">\n                    <Inner/>\n                </ContextProvider>\n            );\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n        it('should render component with div=\"rtl\"', () => {\n            expect(root).attr('dir', 'rtl');\n        });\n        it('should pass \"dir\" as \"contextProvider.dir\" context property', () => {\n            expect(renderer.select('TEST_DIV')).attr('dir', 'rtl');\n        });\n    });\n\n    // this could not be done since react does not allow to pass Symbol properties\n    // @see https://github.com/facebook/react/issues/7552\n    describe.skip('render with Symbol property', () => {\n        const prop = Symbol();\n\n        class Inner extends React.Component {\n            public static contextTypes = {\n                contextProvider: PropTypes.shape({\n                    [prop]: PropTypes.any\n                })\n            };\n            public render() {\n                return <div data-automation-id=\"TEST_DIV\">{this.context.contextProvider[prop]}</div>;\n            }\n        }\n\n        let renderer: any;\n        let root: any;\n\n        beforeEach(() => {\n            const props = {\n                [prop]: 'baz',\n                qwe: 123\n            };\n            renderer = clientRenderer.render(\n                <ContextProvider {...props}>\n                    <Inner/>\n                </ContextProvider>\n            );\n            root = findDOMNode(renderer.result as React.ReactInstance);\n        });\n\n        it('should pass the contenxt {contextProvider: {[Symbol]: \"baz\"}}', () => {\n            expect(renderer.select('TEST_DIV')).text('baz');\n        });\n\n    });\n\n    describe('nested contextProvider', () => {\n        class Inner extends React.Component<{id: string}> {\n            public static contextTypes = {\n                contextProvider: PropTypes.shape({\n                    dir: PropTypes.string,\n                    x: PropTypes.number\n                })\n            };\n            public render() {\n                return (\n                    <div\n                        data-automation-id={this.props.id}\n                        dir={this.context.contextProvider.dir}\n                        children={this.context.contextProvider.x}\n                    />\n                );\n            }\n        }\n\n        let inner1: any;\n        let inner2: any;\n\n        beforeEach(() => {\n            const renderer = clientRenderer.render((\n                <ContextProvider dir=\"ltr\" x={10}>\n                    <Inner id=\"TEST_DIV_1\"/>\n                    <ContextProvider dir=\"rtl\" x={20}>\n                        <Inner id=\"TEST_DIV_2\"/>\n                    </ContextProvider>\n                </ContextProvider>\n            ));\n            inner1 = renderer.select('TEST_DIV_1');\n            inner2 = renderer.select('TEST_DIV_2');\n        });\n\n        it('first Inner component should have dir=\"ltr', () => {\n            expect(inner1).attr('dir', 'ltr');\n        });\n        it('first Inner component should have content \"10\"', () => {\n            expect(inner1).text('10');\n        });\n        it('second Inner component should have dir=\"rtl', () => {\n            expect(inner2).attr('dir', 'rtl');\n        });\n        it('second Inner component should have content \"20\"', () => {\n            expect(inner2).text('20');\n        });\n\n    });\n});\n"]}